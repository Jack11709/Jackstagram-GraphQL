{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nvar _jsxFileName = \"/Users/jackmay/learning-dev/graphql-app/jackstagram/client/lib/secureRoute.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport nextCookie from 'next-cookies';\nimport Login from '../components/auth/Login';\nimport { Query } from 'react-apollo';\nimport { SINGLE_USER_QUERY } from '../lib/query';\n\nconst secureRoute = Component => {\n  class Wrapper extends React.Component {\n    render() {\n      if (!this.props.token) return __jsx(Login, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 9\n        },\n        __self: this\n      });\n      return __jsx(Query, {\n        query: SINGLE_USER_QUERY,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 11\n        },\n        __self: this\n      }, (data, error) => {\n        console.log(data, error);\n        if (error) return __jsx(Login, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 14\n          },\n          __self: this\n        });\n        return __jsx(Component, _extends({}, data, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 15\n          },\n          __self: this\n        }));\n      });\n    }\n\n  }\n\n  Wrapper.getInitialProps = async ctx => {\n    const {\n      token\n    } = nextCookie(ctx);\n    return {\n      token\n    };\n  };\n\n  return Wrapper;\n};\n\nexport default secureRoute;","map":{"version":3,"sources":["/Users/jackmay/learning-dev/graphql-app/jackstagram/client/lib/secureRoute.js"],"names":["nextCookie","Login","Query","SINGLE_USER_QUERY","secureRoute","Component","Wrapper","React","render","props","token","data","error","console","log","getInitialProps","ctx"],"mappings":";;;;AAAA,OAAOA,UAAP,MAAuB,cAAvB;AACA,OAAOC,KAAP,MAAkB,0BAAlB;AACA,SAASC,KAAT,QAAsB,cAAtB;AACA,SAASC,iBAAT,QAAkC,cAAlC;;AAEA,MAAMC,WAAW,GAAIC,SAAD,IAAe;AACjC,QAAMC,OAAN,SAAsBC,KAAK,CAACF,SAA5B,CAAsC;AACpCG,IAAAA,MAAM,GAAG;AACP,UAAI,CAAC,KAAKC,KAAL,CAAWC,KAAhB,EAAuB,OAAO,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACvB,aACE,MAAC,KAAD;AAAO,QAAA,KAAK,EAAEP,iBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,CAACQ,IAAD,EAAOC,KAAP,KAAiB;AAChBC,QAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ,EAAkBC,KAAlB;AACA,YAAIA,KAAJ,EAAW,OAAO,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACX,eAAO,MAAC,SAAD,eAAeD,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAP;AACD,OALH,CADF;AASD;;AAZmC;;AAetCL,EAAAA,OAAO,CAACS,eAAR,GAA0B,MAAOC,GAAP,IAAe;AACvC,UAAM;AAAEN,MAAAA;AAAF,QAAYV,UAAU,CAACgB,GAAD,CAA5B;AACA,WAAO;AAAEN,MAAAA;AAAF,KAAP;AACD,GAHD;;AAKA,SAAOJ,OAAP;AACD,CAtBD;;AAwBA,eAAeF,WAAf","sourcesContent":["import nextCookie from 'next-cookies'\nimport Login from '../components/auth/Login'\nimport { Query } from 'react-apollo'\nimport { SINGLE_USER_QUERY } from '../lib/query'\n \nconst secureRoute = (Component) => {\n  class Wrapper extends React.Component {\n    render() {\n      if (!this.props.token) return <Login />\n      return (\n        <Query query={SINGLE_USER_QUERY}>\n          {(data, error) => {\n            console.log(data, error)\n            if (error) return <Login />\n            return <Component {...data}/>\n          }}\n        </Query>\n      )\n    }\n  }\n\n  Wrapper.getInitialProps = async (ctx) => {\n    const { token } = nextCookie(ctx)\n    return { token }\n  }\n  \n  return Wrapper\n}\n\nexport default secureRoute"]},"metadata":{},"sourceType":"module"}
{"version":3,"file":"static/webpack/static/development/pages/index.js.af06626cb21d21c8f5eb.hot-update.js","sources":["webpack:///./lib/secureRoute.js"],"sourcesContent":["import Router from 'next/router'\nimport nextCookie from 'next-cookies'\nimport { Query } from 'react-apollo'\nimport { SINGLE_USER_QUERY } from '../lib/query'\n \nconst secureRoute = (Component) => {\n\n  class Wrapper extends React.Component {\n    render() {\n      return (\n        <Query query={SINGLE_USER_QUERY}>\n          {({ data, error }) => {\n            if (error) {\n              Router.push('/login')\n              return null\n            }\n            return <Component {...data}/>\n          }}\n        </Query>\n      )\n    }\n  }\n\n  Wrapper.getInitialProps = async (ctx) => {\n    const { token } = nextCookie(ctx)\n    if (!token && ctx.res) {\n      ctx.res.writeHead(302, { Location: '/login' })\n      ctx.res.end()\n      return\n    } \n\n    if (!token) {\n      Router.push('/login')\n    }\n    return { token }\n  }\n  \n  return Wrapper\n}\n\nexport default secureRoute"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AAfA;AACA;AADA;AAAA;AACA;AAiBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AACA;AAJA;AACA;AADA;AAQA;AACA;AACA;AACA;AAXA;AAWA;AAAA;AACA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAaA;AACA;AACA;AACA;;;;A","sourceRoot":""}
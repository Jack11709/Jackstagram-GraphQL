{"version":3,"file":"static/webpack/static/development/pages/index.js.a9b47ee88ab071b00f3a.hot-update.js","sources":["webpack:///./lib/secureRoute.js"],"sourcesContent":["import nextCookie from 'next-cookies'\nimport Login from '../components/auth/Login'\nimport { Query } from 'react-apollo'\nimport { SINGLE_USER_QUERY } from '../lib/query'\n \nconst secureRoute = (Component) => {\n  class Wrapper extends React.Component {\n    render() {\n      if (!this.props.token) return <Login />\n      return (\n        <Query query={SINGLE_USER_QUERY}>\n          {({ data, error }) => {\n            console.log(data, error)\n            if (error) return <Login />\n            return <Component {...data}/>\n          }}\n        </Query>\n      )\n    }\n  }\n\n  Wrapper.getInitialProps = async (ctx) => {\n    const { token } = nextCookie(ctx)\n    return { token }\n  }\n  \n  return Wrapper\n}\n\nexport default secureRoute"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AAbA;AACA;AADA;AAAA;AACA;AAeA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;;;;A","sourceRoot":""}